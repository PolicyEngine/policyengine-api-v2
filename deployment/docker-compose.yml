services:
  api-simulation:
    build:
      context: ..
      dockerfile: projects/policyengine-api-simulation/Dockerfile
    environment:
      - ENVIRONMENT=desktop
    volumes:
      - ../projects/policyengine-api-simulation/src:/app/projects/policyengine-api-simulation/src
      - ../libs:/app/libs
    ports:
      - "8082:8080"
    command: sh -c "cd src && uv run uvicorn policyengine_api_simulation.main:app --reload --host 0.0.0.0 --port 8080"
    networks:
      - policyengine

networks:
  policyengine:
    driver: bridge
